<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<VBox xmlns="http://javafx.com/javafx/21"
    xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.example.arabicsearchengine.controllers.ValidationController" spacing="16" styleClass="view-container" nodeOrientation="RIGHT_TO_LEFT" prefWidth="680" prefHeight="620">

    <padding>
        <Insets top="20" right="24" bottom="20" left="24"/>
    </padding>

    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="12">
        <FontIcon iconLiteral="mdi2c-check-decagram" iconSize="32" iconColor="#1B5E59"/>
        <VBox spacing="2" alignment="CENTER_LEFT">
            <Label text="التحقق الصرفي" styleClass="view-title,arabic-text"/>
            <Label text="تحليل الكلمات والتحقق من صحتها" styleClass="arabic-text" style="-fx-text-fill: #5F5F5F; -fx-font-size: 12px;"/>
        </VBox>
    </HBox>

    <Separator/>

    <!-- Scrollable Content Area -->
    <ScrollPane VBox.vgrow="ALWAYS" fitToWidth="true" style="-fx-padding: 0;">
        <VBox spacing="16" style="-fx-padding: 0;">
            <!-- Mode Selection -->
            <VBox styleClass="card" spacing="12" style="-fx-padding: 16;">
                <Label text="اختر نوع التحقق" styleClass="form-section-header,arabic-text" style="-fx-font-size: 14px; -fx-padding: 0;"/>
                <HBox spacing="32" alignment="CENTER">
                    <RadioButton fx:id="rbValidateAgainstRoot" text="التحقق مقابل جذر" selected="true" styleClass="arabic-text" style="-fx-font-size: 14px;">
                        <toggleGroup>
                            <ToggleGroup fx:id="validationMode"/>
                        </toggleGroup>
                        <graphic>
                            <FontIcon iconLiteral="mdi2t-target" iconSize="18" iconColor="#1B5E59"/>
                        </graphic>
                    </RadioButton>
                    <RadioButton fx:id="rbIdentifyWord" text="تحليل كلمة مجهولة" styleClass="arabic-text" style="-fx-font-size: 14px;">
                        <toggleGroup>
                            <fx:reference source="validationMode"/>
                        </toggleGroup>
                        <graphic>
                            <FontIcon iconLiteral="mdi2m-magnify" iconSize="18" iconColor="#1B5E59"/>
                        </graphic>
                    </RadioButton>
                </HBox>
            </VBox>

            <!-- Input Section -->
            <VBox styleClass="card" spacing="14" style="-fx-padding: 18;">
                <Label text="إدخال البيانات" styleClass="form-section-header,arabic-text" style="-fx-font-size: 15px; -fx-padding: 0 0 4 0;"/>

                <HBox spacing="16" alignment="CENTER_RIGHT">
                    <VBox spacing="6" HBox.hgrow="ALWAYS">
                        <Label text="الكلمة" styleClass="arabic-text" style="-fx-font-weight: 600; -fx-font-size: 13px; -fx-text-fill: #1B5E59;"/>
                        <TextField fx:id="txtWord" promptText="أدخل الكلمة للتحقق" styleClass="arabic-input" style="-fx-font-size: 16px; -fx-padding: 10;"/>
                    </VBox>
                    <VBox spacing="6" HBox.hgrow="ALWAYS">
                        <Label fx:id="lblRootInput" text="الجذر" styleClass="arabic-text" style="-fx-font-weight: 600; -fx-font-size: 13px; -fx-text-fill: #1B5E59;"/>
                        <TextField fx:id="txtRootInput" promptText="أدخل الجذر (3 أحرف)" styleClass="arabic-input" style="-fx-font-size: 16px; -fx-padding: 10;"/>
                    </VBox>
                </HBox>

                <HBox alignment="CENTER" style="-fx-padding: 8 0 0 0;">
                    <Button text="بدء التحقق" onAction="#validate" styleClass="primary-button" prefWidth="160" prefHeight="38">
                        <graphic>
                            <FontIcon iconLiteral="mdi2p-play-circle-outline" iconSize="18" iconColor="white"/>
                        </graphic>
                    </Button>
                </HBox>
            </VBox>

            <!-- Result Section -->
            <VBox fx:id="resultPane" styleClass="validation-result" spacing="14" visible="false" managed="false" style="-fx-padding: 18;">
                <HBox spacing="14" alignment="CENTER_RIGHT">
                    <FontIcon fx:id="iconResult" iconLiteral="mdi2h-help-circle" iconSize="32"/>
                    <VBox spacing="4" HBox.hgrow="ALWAYS">
                        <Label fx:id="lblResultStatus" styleClass="result-status,arabic-text" style="-fx-font-size: 18px;"/>
                        <Label fx:id="lblExplanation" styleClass="result-explanation,arabic-text" wrapText="true" style="-fx-font-size: 13px;"/>
                    </VBox>
                </HBox>

                <Separator style="-fx-padding: 6 0;"/>

                <HBox spacing="24" alignment="CENTER">
                    <VBox alignment="CENTER" spacing="4" styleClass="card" style="-fx-padding: 12 20; -fx-min-width: 100;">
                        <Label text="الكلمة" styleClass="arabic-text" style="-fx-font-size: 11px; -fx-text-fill: #5F5F5F;"/>
                        <Label fx:id="lblWordResult" styleClass="result-value,arabic-text" style="-fx-font-weight: bold; -fx-font-size: 18px; -fx-text-fill: #1B5E59;"/>
                    </VBox>
                    <VBox alignment="CENTER" spacing="4" styleClass="card" style="-fx-padding: 12 20; -fx-min-width: 100;">
                        <Label text="الجذر" styleClass="arabic-text" style="-fx-font-size: 11px; -fx-text-fill: #5F5F5F;"/>
                        <Label fx:id="lblRootResult" styleClass="result-value,arabic-text" style="-fx-font-weight: bold; -fx-font-size: 18px; -fx-text-fill: #1B5E59;"/>
                    </VBox>
                    <VBox alignment="CENTER" spacing="4" styleClass="card" style="-fx-padding: 12 20; -fx-min-width: 100;">
                        <Label text="الوزن" styleClass="arabic-text" style="-fx-font-size: 11px; -fx-text-fill: #5F5F5F;"/>
                        <Label fx:id="lblPatternResult" styleClass="result-value,arabic-text" style="-fx-font-weight: bold; -fx-font-size: 18px; -fx-text-fill: #D4A95E;"/>
                    </VBox>
                </HBox>
            </VBox>

            <Region VBox.vgrow="ALWAYS" style="-fx-min-height: 8;"/>

            <!-- History -->
            <VBox spacing="8" VBox.vgrow="SOMETIMES" style="-fx-min-height: 140;">
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <FontIcon iconLiteral="mdi2h-history" iconSize="16" iconColor="#1B5E59"/>
                    <Label text="سجل العمليات الأخيرة" styleClass="form-section-header,arabic-text" style="-fx-font-size: 14px; -fx-padding: 0;"/>
                </HBox>
                <ListView fx:id="historyList" VBox.vgrow="ALWAYS" styleClass="item-list" style="-fx-min-height: 100; -fx-pref-height: 120;"/>
            </VBox>
        </VBox>
    </ScrollPane>
</VBox>
